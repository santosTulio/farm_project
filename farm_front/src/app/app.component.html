<mat-sidenav-container class="container">
  <mat-sidenav #sidenav mode="side" class="sidebar" opened="true">
    <mat-nav-list>
      <ng-container *ngFor="let link of sidebarLinks">
        <a mat-list-item *ngIf="!link.subSidebarLinks.length;else nested_link" [routerLink]="[link?.path]" routerLinkActive="on" >
          <mat-icon mat-list-icon *ngIf="link.icon">{{link.icon}}</mat-icon>
          <span mat-list-item-title>{{link.label}}</span>
        </a>
        <ng-template #nested_link>
          <mat-expansion-panel [class.mat-elevation-z0]="true">
            <mat-expansion-panel-header>
              <mat-icon mat-list-icon *ngIf="link.icon">{{link.icon}}</mat-icon> {{link.label}}
            </mat-expansion-panel-header>
            <mat-nav-list >
                <a mat-list-item [routerLink]="[subSidebarLink?.path]" *ngFor="let subSidebarLink of link.subSidebarLinks">
                    <mat-icon mat-list-icon *ngIf="subSidebarLink.icon">{{subSidebarLink.icon}}</mat-icon>
                    <span mat-list-item-title>{{subSidebarLink.label}}</span>
                </a>
            </mat-nav-list>
          </mat-expansion-panel>
        </ng-template>
      </ng-container>
    </mat-nav-list>
  </mat-sidenav>
  <mat-sidenav-content><router-outlet></router-outlet></mat-sidenav-content>
</mat-sidenav-container>